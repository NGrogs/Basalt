{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\src\\\\components\\\\Account\\\\myAccount.js\";\nimport React, { Component } from 'react';\nimport firebase from '../Firebase/firebase';\nimport { withRouter } from 'react-router-dom';\nimport logoSmall from '../../Images/logoSmall.png';\n\nvar myAccount =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(myAccount, _Component);\n\n  function myAccount() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, myAccount);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(myAccount)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      user: '',\n      uid: '',\n      email: '',\n      country: '',\n      region: '',\n      organizationType: '',\n      organizationName: '',\n      publicEthKey: '',\n      reviews: [],\n      loading: true\n    };\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var _uid, loc;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              firebase.auth().onAuthStateChanged(function (user) {\n                if (user) {\n                  // User is signed in.\n                  this.setState({\n                    user: firebase.auth().currentUser\n                  }); //not needed?\n\n                  this.setState({\n                    uid: firebase.auth().currentUser.uid\n                  });\n                } else {\n                  // No user is signed in.\n                  //redirect to login\n                  this.props.history.push('/login');\n                }\n              }.bind(_assertThisInitialized(_assertThisInitialized(_this))));\n              _uid = _this.state.uid; // get reference to database location we want\n\n              loc = firebase.database().ref('/users/' + _uid);\n              loc.once('value', function (snapshot) {\n                snapshot.forEach(function (child) {\n                  _this.setState({\n                    email: child.val().email,\n                    country: child.val().country,\n                    region: child.val().Region,\n                    organizationName: child.val().organizationName,\n                    organizationType: child.val().organizationType,\n                    publicEthKey: child.val().EthKey\n                  });\n                });\n\n                _this.setState({\n                  loading: false\n                });\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.getReviews =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(e) {\n        var _uid, loc2, theReviews;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                e.preventDefault();\n                _uid = _this.state.uid; // get reviews for the current user\n\n                loc2 = firebase.database().ref('/reviews/' + _uid);\n                theReviews = [];\n                loc2.once('value', function (snapshot) {\n                  var _reviewer = snapshot.key;\n                  console.log(_reviewer);\n                  console.log(snapshot); //console.log(snapshot.key)\n\n                  snapshot.forEach(function (child) {\n                    var theVal = child.val();\n                    console.log(\"key is\" + child.key);\n                    theReviews.push(theVal);\n                    var _date = theReviews[0].date;\n                    var _rating = theReviews[0].rating;\n                    var _text = theReviews[0].text;\n                    console.log(_date);\n                    console.log(_rating);\n                    console.log(_text);\n\n                    _this.setState({\n                      reviews: [_this.state.reviews, _reviewer, _date, _rating, _text]\n                    });\n                  });\n                }); //this.setState({reviews: [this.state.reviews, theReviews]})\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    return _this;\n  }\n\n  _createClass(myAccount, [{\n    key: \"render\",\n    value: function render() {\n      return this.state.loading ? React.createElement(\"div\", {\n        align: \"center\",\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        src: logoSmall,\n        alt: \"logo\",\n        style: {\n          width: '15em',\n          height: '15em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"loading ...\")) : React.createElement(\"div\", {\n        align: \"center\",\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \" Account Details \"), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-white\",\n        style: {\n          backgroundColor: '#B65DF3',\n          padding: '.2em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Personal\")), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-white\",\n        style: {\n          backgroundColor: '#B65DF3',\n          padding: '.2em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"Organizational\")), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-white\",\n        style: {\n          backgroundColor: '#B65DF3',\n          padding: '.2em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"Location\"))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \"Email: \", this.state.email)), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Organization Name: \", this.state.organizationName)), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Country: \", this.state.country))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Public Ethereum Key: \", this.state.publicEthKey)), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"Organization Type: \", this.state.organizationType)), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"Region: \", this.state.region))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \" Reviews \"), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-lg text-white\",\n        style: {\n          backgroundColor: \"#B65DF3\"\n        },\n        type: \"submit\",\n        onClick: this.getReviews,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, \" Get my reviews \"), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"Reviewer ID: \", this.state.reviews[1]), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"Date: \", this.state.reviews[2]), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"Star rating: \", this.state.reviews[3], \" /5\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"Text: \", this.state.reviews[4]), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, this.state.reviews.map(function (item) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }, \" \", item, \" \");\n      })));\n    }\n  }]);\n\n  return myAccount;\n}(Component);\n\nexport default withRouter(myAccount);","map":{"version":3,"sources":["C:\\Users\\elite\\Desktop\\Blockchain Project\\Basalt\\src\\components\\Account\\myAccount.js"],"names":["React","Component","firebase","withRouter","logoSmall","myAccount","state","user","uid","email","country","region","organizationType","organizationName","publicEthKey","reviews","loading","componentDidMount","auth","onAuthStateChanged","setState","currentUser","props","history","push","bind","_uid","loc","database","ref","once","snapshot","forEach","child","val","Region","EthKey","getReviews","e","preventDefault","loc2","theReviews","_reviewer","key","console","log","theVal","_date","date","_rating","rating","_text","text","width","height","backgroundColor","padding","map","item"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport firebase from '../Firebase/firebase';\r\nimport { withRouter } from 'react-router-dom';\r\nimport logoSmall from '../../Images/logoSmall.png';\r\nclass myAccount extends Component {\r\n    state = {\r\n        user: '',\r\n        uid: '',\r\n        email: '',\r\n        country: '',\r\n        region: '',\r\n        organizationType: '',\r\n        organizationName: '',\r\n        publicEthKey: '',\r\n\r\n        reviews: [],\r\n\r\n        loading: true,\r\n    }\r\n\r\n    componentDidMount = async () => {\r\n\r\n        firebase.auth().onAuthStateChanged(function(user) {\r\n            if (user) {\r\n                // User is signed in.\r\n                this.setState({user: firebase.auth().currentUser}) //not needed?\r\n                this.setState({uid: firebase.auth().currentUser.uid })\r\n            } else {\r\n                // No user is signed in.\r\n                //redirect to login\r\n                this.props.history.push('/login')\r\n            }\r\n            }.bind(this))\r\n            var _uid = this.state.uid\r\n\r\n            // get reference to database location we want\r\n            const loc = firebase.database().ref('/users/' + _uid)\r\n            loc.once('value', snapshot => {\r\n                snapshot.forEach(child => {\r\n                    this.setState({\r\n                        email: child.val().email,\r\n                        country: child.val().country,\r\n                        region: child.val().Region,\r\n                        organizationName: child.val().organizationName,\r\n                        organizationType: child.val().organizationType,\r\n                        publicEthKey: child.val().EthKey\r\n                    })\r\n                })\r\n                this.setState({loading: false})\r\n            })\r\n        }\r\n\r\n    // works for 1 review - need to scale\r\n    getReviews = async (e) => {\r\n        e.preventDefault()\r\n        var _uid = this.state.uid\r\n        // get reviews for the current user\r\n        const loc2 = firebase.database().ref('/reviews/' + _uid)\r\n        var theReviews = []\r\n        loc2.once('value', snapshot => {\r\n            var _reviewer = snapshot.key\r\n            console.log(_reviewer)\r\n            console.log(snapshot)\r\n            //console.log(snapshot.key)\r\n            snapshot.forEach(child => {\r\n                var theVal = child.val()\r\n                console.log(\"key is\" +child.key)\r\n                theReviews.push(theVal)\r\n                var _date = theReviews[0].date\r\n                var _rating = theReviews[0].rating\r\n                var _text = theReviews[0].text\r\n                console.log(_date)\r\n                console.log(_rating)\r\n                console.log(_text)\r\n                this.setState({reviews: [this.state.reviews, _reviewer, _date, _rating, _text]})\r\n\r\n            })\r\n        })\r\n    \r\n        //this.setState({reviews: [this.state.reviews, theReviews]})\r\n    }\r\n\r\n    \r\n    render() {\r\n        return (\r\n\r\n            this.state.loading ? <div align=\"center\"className=\"container\"> \r\n                <br/><br/>\r\n                <img src={logoSmall} alt=\"logo\" style={{width: '15em', height: '15em'}}/>\r\n                <br/><br/>\r\n                <h1>loading ...</h1> \r\n            \r\n            </div> : \r\n\r\n            <div align=\"center\"className=\"container\">\r\n            <br/><br/>\r\n                <h1> Account Details </h1> <br/><br/><br/>\r\n                <div className=\"row\">\r\n                    <div className=\"col-sm\">\r\n                        <h3 className=\"text-white\" style={{backgroundColor: '#B65DF3', padding: '.2em'}}>Personal</h3>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <h3 className=\"text-white\" style={{backgroundColor: '#B65DF3', padding: '.2em'}}>Organizational</h3>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <h3 className=\"text-white\" style={{backgroundColor: '#B65DF3', padding: '.2em'}}>Location</h3>\r\n                    </div>\r\n                </div>\r\n                <br/>                \r\n                <div className=\"row\">\r\n                    <div className=\"col-sm\">\r\n                        <h4>Email: {this.state.email}</h4>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <h4>Organization Name: {this.state.organizationName}</h4>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <h4>Country: {this.state.country}</h4>\r\n                    </div>\r\n                </div>\r\n                <br/><br/>\r\n                <div className=\"row\">\r\n                    <div className=\"col-sm\" >\r\n                        <h4>Public Ethereum Key: {this.state.publicEthKey}</h4>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <h4>Organization Type: {this.state.organizationType}</h4>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <h4>Region: {this.state.region}</h4>\r\n                    </div>\r\n                </div>\r\n\r\n                <br/><br/><br/><br/><br/>\r\n\r\n                <h1> Reviews </h1> <br/><br/><br/>\r\n                <button className=\"btn btn-lg text-white\" style={{backgroundColor: \"#B65DF3\"}} type=\"submit\" onClick={this.getReviews}> Get my reviews </button>\r\n\r\n\r\n                <div className=\"row\">\r\n                    <div className=\"col-sm\" ><br/><br/>\r\n                        <h4>Reviewer ID: {this.state.reviews[1]}</h4><br/>\r\n                        <h4>Date: {this.state.reviews[2]}</h4><br/>\r\n                        <h4>Star rating: {this.state.reviews[3]} /5</h4><br/>\r\n                        <h4>Text: {this.state.reviews[4]}</h4><br/>\r\n                    </div>\r\n                </div>\r\n\r\n                <div>\r\n                    {this.state.reviews.map(item => <div> {item} </div>)}\r\n                </div>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(myAccount);"]},"metadata":{},"sourceType":"module"}