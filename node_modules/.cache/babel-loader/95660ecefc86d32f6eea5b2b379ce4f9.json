{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\src\\\\components\\\\Account\\\\myAccount.js\";\nimport React, { Component } from 'react';\nimport firebase from '../Firebase/firebase';\nimport { withRouter } from 'react-router-dom';\nimport logoSmall from '../../Images/logoSmall.png';\n/** \r\n *  This component displays the account details of the current user\r\n *  These details are retrieved from a firebase database\r\n*/\n\nvar myAccount =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(myAccount, _Component);\n\n  function myAccount() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, myAccount);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(myAccount)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      user: '',\n      uid: '',\n      email: '',\n      country: '',\n      region: '',\n      organizationType: '',\n      organizationName: '',\n      publicEthKey: '',\n      reviews: [],\n      loading: true\n    };\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var _uid, loc;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              firebase.auth().onAuthStateChanged(function (user) {\n                if (user) {\n                  // User is signed in.\n                  this.setState({\n                    user: firebase.auth().currentUser\n                  }); //not needed?\n\n                  this.setState({\n                    uid: firebase.auth().currentUser.uid\n                  });\n                } else {\n                  // No user is signed in.\n                  //redirect to login\n                  this.props.history.push('/login');\n                }\n              }.bind(_assertThisInitialized(_assertThisInitialized(_this))));\n              _uid = _this.state.uid;\n              /* Get users details from database */\n\n              loc = firebase.database().ref('/users/' + _uid);\n              loc.once('value', function (snapshot) {\n                // snapshot.forEach(child => {\n\n                /* update the state variables to have the values from database */\n\n                /*     this.setState({\r\n                         email: child.val().email,\r\n                         country: child.val().country,\r\n                         region: child.val().Region,\r\n                         organizationName: child.val().organizationName,\r\n                         organizationType: child.val().organizationType,\r\n                         publicEthKey: child.val().EthKey\r\n                     })*/\n                _this.setState({\n                  email: snapshot.child('email').val(),\n                  organizationName: snapshot.child('organizationName').val(),\n                  organizationType: snapshot.child('organizationType').val(),\n                  region: snapshot.child('Region').val(),\n                  country: snapshot.child('country').val(),\n                  publicEthKey: snapshot.child('EthKey').val()\n                }); //   })\n\n                /* displays the account information */\n\n\n                _this.setState({\n                  loading: false\n                });\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.getReviews =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(e) {\n        var _uid, loc2, theReviews;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                e.preventDefault();\n                _uid = _this.state.uid; // get reviews for the current user\n\n                loc2 = firebase.database().ref('/reviews/' + _uid);\n                theReviews = [];\n                loc2.once('value', function (snapshot) {\n                  if (snapshot.exists()) {\n                    var i = 0;\n                    snapshot.forEach(function (child) {\n                      var theVal = child.val();\n                      theReviews.push(theVal);\n                      var _reviewer = child.key;\n                      var _date = theReviews[i].date;\n                      var _rating = theReviews[i].rating;\n                      var _text = theReviews[i].text;\n                      i++;\n\n                      _this.setState({\n                        reviews: _this.state.reviews.concat([_reviewer, _date, _rating, _text])\n                      });\n                    });\n                  } else {\n                    alert(\"No Reviews Found\");\n                  }\n                });\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.getDetails =\n    /*#__PURE__*/\n    function () {\n      var _ref3 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3(e) {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                e.preventDefault();\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      return function (_x2) {\n        return _ref3.apply(this, arguments);\n      };\n    }();\n\n    return _this;\n  }\n\n  _createClass(myAccount, [{\n    key: \"render\",\n    value: function render() {\n      return this.state.loading ? React.createElement(\"div\", {\n        align: \"center\",\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }), React.createElement(\"img\", {\n        src: logoSmall,\n        alt: \"logo\",\n        style: {\n          width: '15em',\n          height: '15em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"loading ...\"), React.createElement(\"button\", {\n        className: \"btn btn-lg text-white\",\n        style: {\n          backgroundColor: \"#B65DF3\"\n        },\n        type: \"submit\",\n        onClick: this.getDetails,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, \" Get my account details \")) : React.createElement(\"div\", {\n        align: \"center\",\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \" Account Details \"), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-white\",\n        style: {\n          backgroundColor: '#B65DF3',\n          padding: '.2em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Personal\")), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-white\",\n        style: {\n          backgroundColor: '#B65DF3',\n          padding: '.2em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Organizational\")), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-white\",\n        style: {\n          backgroundColor: '#B65DF3',\n          padding: '.2em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Location\"))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"Email:\"), \" \", this.state.email)), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Organization Name:\"), \" \", this.state.organizationName)), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, \"Country:\"), \" \", this.state.country))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"Metamask ID:\"), \" \", this.state.publicEthKey)), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"Organization Type:\"), \" \", this.state.organizationType)), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"Region:\"), \" \", this.state.region))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \" Reviews \"), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-lg text-white\",\n        style: {\n          backgroundColor: \"#B65DF3\"\n        },\n        type: \"submit\",\n        onClick: this.getReviews,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \" Get my reviews \"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-white\",\n        style: {\n          backgroundColor: '#B65DF3',\n          padding: '.2em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"Reviewer ID \")), React.createElement(\"div\", {\n        className: \"col-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-white\",\n        style: {\n          backgroundColor: '#B65DF3',\n          padding: '.2em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \"Date \")), React.createElement(\"div\", {\n        className: \"col-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-white\",\n        style: {\n          backgroundColor: '#B65DF3',\n          padding: '.2em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Star rating  /5\")), React.createElement(\"div\", {\n        className: \"col-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-white\",\n        style: {\n          backgroundColor: '#B65DF3',\n          padding: '.2em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"Text\"))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, this.state.reviews.map(function (item) {\n        return React.createElement(\"div\", {\n          className: \"col-3\",\n          style: {\n            marginBottom: '3em'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, \" \", React.createElement(\"h5\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, item), \" \");\n      })));\n    }\n  }]);\n\n  return myAccount;\n}(Component);\n\nexport default withRouter(myAccount);","map":{"version":3,"sources":["C:\\Users\\elite\\Desktop\\Blockchain Project\\Basalt\\src\\components\\Account\\myAccount.js"],"names":["React","Component","firebase","withRouter","logoSmall","myAccount","state","user","uid","email","country","region","organizationType","organizationName","publicEthKey","reviews","loading","componentDidMount","auth","onAuthStateChanged","setState","currentUser","props","history","push","bind","_uid","loc","database","ref","once","snapshot","child","val","getReviews","e","preventDefault","loc2","theReviews","exists","i","forEach","theVal","_reviewer","key","_date","date","_rating","rating","_text","text","concat","alert","getDetails","width","height","backgroundColor","padding","map","item","marginBottom"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport firebase from '../Firebase/firebase';\r\nimport { withRouter } from 'react-router-dom';\r\nimport logoSmall from '../../Images/logoSmall.png';\r\n\r\n/** \r\n *  This component displays the account details of the current user\r\n *  These details are retrieved from a firebase database\r\n*/\r\nclass myAccount extends Component {\r\n    state = {\r\n        user: '',\r\n        uid: '',\r\n\r\n        email: '',\r\n        country: '',\r\n        region: '',\r\n        organizationType: '',\r\n        organizationName: '',\r\n        publicEthKey: '',\r\n\r\n        reviews: [],\r\n        loading: true,\r\n    }\r\n\r\n    componentDidMount = async () => {\r\n        firebase.auth().onAuthStateChanged(function(user) {\r\n            if (user) {\r\n                // User is signed in.\r\n                this.setState({user: firebase.auth().currentUser}) //not needed?\r\n                this.setState({uid: firebase.auth().currentUser.uid })\r\n            } else {\r\n                // No user is signed in.\r\n                //redirect to login\r\n                this.props.history.push('/login')\r\n            }\r\n            }.bind(this))\r\n            var _uid = this.state.uid\r\n            /* Get users details from database */\r\n            const loc = firebase.database().ref('/users/' + _uid)\r\n            loc.once('value', snapshot => {\r\n               // snapshot.forEach(child => {\r\n                    /* update the state variables to have the values from database */\r\n               /*     this.setState({\r\n                        email: child.val().email,\r\n                        country: child.val().country,\r\n                        region: child.val().Region,\r\n                        organizationName: child.val().organizationName,\r\n                        organizationType: child.val().organizationType,\r\n                        publicEthKey: child.val().EthKey\r\n                    })*/\r\n\r\n                    this.setState({\r\n                        email: snapshot.child('email').val(),\r\n                        organizationName: snapshot.child('organizationName').val(),\r\n                        organizationType: snapshot.child('organizationType').val(),\r\n                        region: snapshot.child('Region').val(),\r\n                        country: snapshot.child('country').val(),\r\n                        publicEthKey: snapshot.child('EthKey').val()\r\n                    })\r\n             //   })\r\n                /* displays the account information */\r\n                this.setState({loading: false})\r\n            })\r\n        }\r\n\r\n    /* Get the reviews for the current user from database */\r\n    getReviews = async (e) => {\r\n        e.preventDefault()\r\n        var _uid = this.state.uid\r\n        // get reviews for the current user\r\n        const loc2 = firebase.database().ref('/reviews/' + _uid)\r\n        var theReviews = []\r\n        loc2.once('value', snapshot => {\r\n            if(snapshot.exists()) {\r\n                var i = 0;\r\n                snapshot.forEach(child => {\r\n                    var theVal = child.val()\r\n                    theReviews.push(theVal)\r\n                    var _reviewer = child.key\r\n                    var _date = theReviews[i].date\r\n                    var _rating = theReviews[i].rating\r\n                    var _text = theReviews[i].text\r\n                    i++\r\n                    this.setState({reviews: this.state.reviews.concat([_reviewer, _date, _rating, _text])})\r\n                })\r\n            }\r\n            else {\r\n                alert(\"No Reviews Found\")\r\n            }\r\n            \r\n        })\r\n    }\r\n\r\n    getDetails = async (e) => {\r\n        e.preventDefault()\r\n\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n\r\n            this.state.loading ? <div align=\"center\"className=\"container\"> \r\n                <br/><br/>\r\n                <img src={logoSmall} alt=\"logo\" style={{width: '15em', height: '15em'}}/>\r\n                <br/><br/>\r\n                <h1>loading ...</h1>\r\n                <button className=\"btn btn-lg text-white\" style={{backgroundColor: \"#B65DF3\"}} type=\"submit\" onClick={this.getDetails}> Get my account details </button>\r\n            \r\n            </div> : \r\n\r\n            <div align=\"center\"className=\"container\">\r\n            <br/><br/>\r\n                <h1> Account Details </h1> <br/><br/><br/>\r\n                <div className=\"row\">\r\n                    <div className=\"col-sm\">\r\n                        <h3 className=\"text-white\" style={{backgroundColor: '#B65DF3', padding: '.2em'}}>Personal</h3>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <h3 className=\"text-white\" style={{backgroundColor: '#B65DF3', padding: '.2em'}}>Organizational</h3>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <h3 className=\"text-white\" style={{backgroundColor: '#B65DF3', padding: '.2em'}}>Location</h3>\r\n                    </div>\r\n                </div>\r\n                <br/>                \r\n                <div className=\"row\">\r\n                    <div className=\"col-sm\">\r\n                        <h4><b>Email:</b> {this.state.email}</h4>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <h4><b>Organization Name:</b> {this.state.organizationName}</h4>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <h4><b>Country:</b> {this.state.country}</h4>\r\n                    </div>\r\n                </div>\r\n                <br/><br/>\r\n                <div className=\"row\">\r\n                    <div className=\"col-sm\" >\r\n                        <h4><b>Metamask ID:</b> {this.state.publicEthKey}</h4>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <h4><b>Organization Type:</b> {this.state.organizationType}</h4>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <h4><b>Region:</b> {this.state.region}</h4>\r\n                    </div>\r\n                </div>\r\n\r\n                <br/><br/><br/><br/><br/>\r\n\r\n                <h1> Reviews </h1> <br/><br/><br/>\r\n                <button className=\"btn btn-lg text-white\" style={{backgroundColor: \"#B65DF3\"}} type=\"submit\" onClick={this.getReviews}> Get my reviews </button>\r\n\r\n                <br/><br/><br/><br/>\r\n                <div className=\"row\">\r\n                    <div className=\"col-3\" ><h3 className=\"text-white\" style={{backgroundColor: '#B65DF3', padding: '.2em'}}>Reviewer ID </h3></div>\r\n                    <div className=\"col-3\" ><h3 className=\"text-white\" style={{backgroundColor: '#B65DF3', padding: '.2em'}}>Date </h3></div>\r\n                    <div className=\"col-3\" ><h3 className=\"text-white\" style={{backgroundColor: '#B65DF3', padding: '.2em'}}>Star rating  /5</h3></div>\r\n                    <div className=\"col-3\" ><h3 className=\"text-white\" style={{backgroundColor: '#B65DF3', padding: '.2em'}}>Text</h3></div>                    \r\n                </div>\r\n                <br/><br/>\r\n                <div className=\"row\">\r\n                    {this.state.reviews.map(item => <div className=\"col-3\" style={{marginBottom: '3em'}}> <h5>{item}</h5> </div>)}\r\n                </div>\r\n                \r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(myAccount);"]},"metadata":{},"sourceType":"module"}