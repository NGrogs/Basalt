{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\elite\\\\Desktop\\\\Blockchain Project\\\\Basalt\\\\src\\\\components\\\\Account\\\\myAccount.js\";\nimport React, { Component } from 'react';\nimport firebase from '../Firebase/firebase';\nimport { withRouter } from 'react-router-dom';\n\nvar myAccount =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(myAccount, _Component);\n\n  function myAccount() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, myAccount);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(myAccount)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      user: '',\n      uid: '',\n      email: '',\n      country: '',\n      region: '',\n      organizationType: '',\n      organizationName: '',\n      publicEthKey: '',\n      reviews: []\n    };\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var _uid, loc;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              firebase.auth().onAuthStateChanged(function (user) {\n                if (user) {\n                  // User is signed in.\n                  this.setState({\n                    user: firebase.auth().currentUser\n                  }); //not needed?\n\n                  this.setState({\n                    uid: firebase.auth().currentUser.uid\n                  });\n                } else {\n                  // No user is signed in.\n                  //redirect to login\n                  this.props.history.push('/login');\n                }\n              }.bind(_assertThisInitialized(_assertThisInitialized(_this))));\n              _uid = _this.state.uid; // get reference to database location we want\n\n              loc = firebase.database().ref('/users/' + _uid);\n              loc.once('value', function (snapshot) {\n                snapshot.forEach(function (child) {\n                  _this.setState({\n                    email: child.val().email,\n                    country: child.val().country,\n                    region: child.val().Region,\n                    organizationName: child.val().organizationName,\n                    organizationType: child.val().organizationType,\n                    publicEthKey: child.val().EthKey\n                  });\n                });\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.getReviews =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(e) {\n        var _uid, loc2, theReviews;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                e.preventDefault();\n                _uid = _this.state.uid;\n                console.log(\"reviews\"); // get reviews for the current user\n\n                loc2 = firebase.database().ref('/reviews/' + _uid);\n                theReviews = [];\n                loc2.once('value', function (snapshot) {\n                  var _reviewer = snapshot.key; //console.log(snapshot.key)\n\n                  snapshot.forEach(function (child) {\n                    //console.log(child.key())\n                    var theVal = child.val(); //console.log(theVal)\n\n                    theReviews.push(theVal);\n                    console.log(theReviews); //  console.log(theReviews[0].date);\n                    // console.log(theReviews[0].rating);\n                    // console.log(theReviews[0].text);\n\n                    var _date = theReviews[0].date;\n                    var _rating = theReviews[0].rating;\n                    var _text = theReviews[0].text;\n\n                    _this.setState({\n                      reviews: [_this.state.reviews, _reviewer, _date, _rating, _text]\n                    });\n                  });\n                }); //this.setState({reviews: [this.state.reviews, theReviews]})\n                //this.setState({reviews: theReviews})\n                // console.log(this.state.reviews[0])\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    return _this;\n  }\n\n  _createClass(myAccount, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        align: \"center\",\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \" Account Details \"), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-white\",\n        style: {\n          backgroundColor: '#B65DF3',\n          padding: '.2em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"Personal\")), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-white\",\n        style: {\n          backgroundColor: '#B65DF3',\n          padding: '.2em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"Organizational\")), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-white\",\n        style: {\n          backgroundColor: '#B65DF3',\n          padding: '.2em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"Location\"))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Email: \", this.state.email)), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Organization Name: \", this.state.organizationName)), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Country: \", this.state.country))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"Public Ethereum Key: \", this.state.publicEthKey)), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Organization Type: \", this.state.organizationType)), React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Region: \", this.state.region))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \" Reviews \"), \" \", React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"btn btn-lg text-white\",\n        style: {\n          backgroundColor: \"#B65DF3\"\n        },\n        type: \"submit\",\n        onClick: this.getReviews,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \" Get my reviews \"), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, \"Reviewer ID: \", this.state.reviews[1]), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Date: \", this.state.reviews[2]), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Star rating: \", this.state.reviews[3], \" /5\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }), React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"Text: \", this.state.reviews[4]), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return myAccount;\n}(Component);\n\nexport default withRouter(myAccount);","map":{"version":3,"sources":["C:\\Users\\elite\\Desktop\\Blockchain Project\\Basalt\\src\\components\\Account\\myAccount.js"],"names":["React","Component","firebase","withRouter","myAccount","state","user","uid","email","country","region","organizationType","organizationName","publicEthKey","reviews","componentDidMount","auth","onAuthStateChanged","setState","currentUser","props","history","push","bind","_uid","loc","database","ref","once","snapshot","forEach","child","val","Region","EthKey","getReviews","e","preventDefault","console","log","loc2","theReviews","_reviewer","key","theVal","_date","date","_rating","rating","_text","text","backgroundColor","padding"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport firebase from '../Firebase/firebase';\r\nimport { withRouter } from 'react-router-dom';\r\nclass myAccount extends Component {\r\n    state = {\r\n        user: '',\r\n        uid: '',\r\n        email: '',\r\n        country: '',\r\n        region: '',\r\n        organizationType: '',\r\n        organizationName: '',\r\n        publicEthKey: '',\r\n\r\n        reviews: [],\r\n    }\r\n\r\n    componentDidMount = async () => {\r\n\r\n        firebase.auth().onAuthStateChanged(function(user) {\r\n            if (user) {\r\n                // User is signed in.\r\n                this.setState({user: firebase.auth().currentUser}) //not needed?\r\n                this.setState({uid: firebase.auth().currentUser.uid })\r\n            } else {\r\n                // No user is signed in.\r\n                //redirect to login\r\n                this.props.history.push('/login')\r\n            }\r\n            }.bind(this))\r\n            var _uid = this.state.uid\r\n\r\n            // get reference to database location we want\r\n            const loc = firebase.database().ref('/users/' + _uid)\r\n            loc.once('value', snapshot => {\r\n                snapshot.forEach(child => {\r\n                    this.setState({\r\n                        email: child.val().email,\r\n                        country: child.val().country,\r\n                        region: child.val().Region,\r\n                        organizationName: child.val().organizationName,\r\n                        organizationType: child.val().organizationType,\r\n                        publicEthKey: child.val().EthKey\r\n                    })\r\n                })\r\n            })\r\n        }\r\n\r\n    getReviews = async (e) => {\r\n        e.preventDefault()\r\n        var _uid = this.state.uid\r\n        console.log(\"reviews\")\r\n        // get reviews for the current user\r\n        const loc2 = firebase.database().ref('/reviews/' + _uid)\r\n        var theReviews = []\r\n        loc2.once('value', snapshot => {\r\n            var _reviewer = snapshot.key\r\n            //console.log(snapshot.key)\r\n            snapshot.forEach(child => {\r\n                //console.log(child.key())\r\n                var theVal = child.val()\r\n                //console.log(theVal)\r\n                theReviews.push(theVal)\r\n                console.log(theReviews);\r\n                //  console.log(theReviews[0].date);\r\n                // console.log(theReviews[0].rating);\r\n                // console.log(theReviews[0].text);\r\n                var _date = theReviews[0].date\r\n                var _rating = theReviews[0].rating\r\n                var _text = theReviews[0].text\r\n                this.setState({reviews: [this.state.reviews, _reviewer, _date, _rating, _text]})\r\n\r\n            })\r\n        })\r\n    \r\n        //this.setState({reviews: [this.state.reviews, theReviews]})\r\n\r\n        //this.setState({reviews: theReviews})\r\n       // console.log(this.state.reviews[0])\r\n    }\r\n\r\n    \r\n    render() {\r\n        return (\r\n            <div align=\"center\"className=\"container\">\r\n            <br/><br/>\r\n                <h1> Account Details </h1> <br/><br/><br/>\r\n                <div className=\"row\">\r\n                    <div className=\"col-sm\">\r\n                        <h3 className=\"text-white\" style={{backgroundColor: '#B65DF3', padding: '.2em'}}>Personal</h3>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <h3 className=\"text-white\" style={{backgroundColor: '#B65DF3', padding: '.2em'}}>Organizational</h3>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <h3 className=\"text-white\" style={{backgroundColor: '#B65DF3', padding: '.2em'}}>Location</h3>\r\n                    </div>\r\n                </div>\r\n                <br/>                \r\n                <div className=\"row\">\r\n                    <div className=\"col-sm\">\r\n                        <h4>Email: {this.state.email}</h4>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <h4>Organization Name: {this.state.organizationName}</h4>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <h4>Country: {this.state.country}</h4>\r\n                    </div>\r\n                </div>\r\n                <br/><br/>\r\n                <div className=\"row\">\r\n                    <div className=\"col-sm\" >\r\n                        <h4>Public Ethereum Key: {this.state.publicEthKey}</h4>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <h4>Organization Type: {this.state.organizationType}</h4>\r\n                    </div>\r\n                    <div className=\"col-sm\">\r\n                        <h4>Region: {this.state.region}</h4>\r\n                    </div>\r\n                </div>\r\n\r\n                <br/><br/><br/><br/><br/>\r\n\r\n                <h1> Reviews </h1> <br/><br/><br/>\r\n                <button className=\"btn btn-lg text-white\" style={{backgroundColor: \"#B65DF3\"}} type=\"submit\" onClick={this.getReviews}> Get my reviews </button>\r\n\r\n\r\n                <div className=\"row\">\r\n                    <div className=\"col-sm\" ><br/><br/>\r\n                        <h4>Reviewer ID: {this.state.reviews[1]}</h4><br/>\r\n                        <h4>Date: {this.state.reviews[2]}</h4><br/>\r\n                        <h4>Star rating: {this.state.reviews[3]} /5</h4><br/>\r\n                        <h4>Text: {this.state.reviews[4]}</h4><br/>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default withRouter(myAccount);"]},"metadata":{},"sourceType":"module"}